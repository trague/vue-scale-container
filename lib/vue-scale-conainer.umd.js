(function(n,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("vue-demi")):typeof define=="function"&&define.amd?define(["vue-demi"],c):(n=typeof globalThis<"u"?globalThis:n||self,n.VueScaleConainer=c(n.VueDemi))})(this,function(n){"use strict";const c=e=>e?Object.entries(e).reduce((t,[i,l])=>(i=i.charAt(0).toUpperCase()+i.slice(1),i=`on${i}`,{...t,[i]:l}),{}):{};function m(e,t={},i){if(n.isVue2)return n.h(e,t,i);const{props:l,domProps:d,on:a,...s}=t,r=a?c(a):{};return n.h(e,{...s,...l,...d,...r},i)}const H=e=>typeof e=="function"?e():e;let u;const v=e=>{var a;if(u!==void 0)return u;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const l=document.createElement("div");l.style.width="100%",t.appendChild(l);const d=l.offsetWidth;return(a=t.parentNode)==null||a.removeChild(t),u=i-d,u},w=n.defineComponent({name:"VueScaleContainer",props:{width:{type:Number,default:1920},height:{type:Number,default:1080},minHeight:{type:Number,default:0},maxHeight:{type:Number,default:0},forceUpdateOnResize:{type:Boolean,default:!1},fit:{type:String,default:"fill"}},setup(e){const t=n.ref(!0),i=n.ref(1),l=n.ref(1),d=n.ref(e.height);n.watchEffect(()=>{document.documentElement.style.setProperty("--scale-x",i.value),document.documentElement.style.setProperty("--scale-y",l.value)});const a=()=>{if((!e.minHeight||e.minHeight>e.height)&&(!e.maxHeight||e.maxHeight<e.height)){d.value=e.height;return}const r=window.innerWidth/e.width,f=window.innerHeight/e.height;if(r===f){d.value=e.height;return}const o=r*window.innerHeight;let h=e.height;o<e.height&&e.minHeight?e.minHeight<o?h=o:e.minHeight>=o&&(h=e.minHeight):o>e.height&&e.maxHeight&&(e.maxHeight>o?h=o:e.maxHeight<=o&&(h=e.maxHeight)),d.value=h},s=r=>{a();const f=e.width,o=d.value;if(e.fit==="fill")i.value=window.innerWidth/f,l.value=window.innerHeight/o;else if(e.fit==="w-full"){if(i.value=window.innerWidth/f,l.value=i.value,i.value>window.innerHeight/o){const h=v(""),g=(window.innerWidth-h)/f;g<window.innerHeight/o?l.value=window.innerHeight/o:(i.value=g,l.value=g)}}else console.warn(`vue-scale-container.fit不支持${e.fit}参数`);r&&e.forceUpdateOnResize&&(t.value=!1,n.nextTick(()=>{t.value=!0}))};return n.onMounted(()=>{s(),window.addEventListener("resize",s)}),n.onUnmounted(()=>{window.removeEventListener("resize",s)}),{scaleX:i,scaleY:l,domHeight:d,renderSlot:t}},render(){const{domHeight:e,width:t,scaleX:i,scaleY:l,renderSlot:d,forceUpdateOnResize:a}=this;return m("div",{class:"scale-container-wrap",style:{height:e*l+"px",width:t*i+"px",overflow:"hidden"}},[m("div",{class:"scale-container",style:{height:e+"px",width:t+"px",transform:`scaleX(${i}) scaleY(${l})`,transformOrigin:"0 0"}},[this.$slots.default&&(!a||d)?H(this.$slots.default):void 0])])}});return w.install=function(e){e.component(w.name,w)},w});
